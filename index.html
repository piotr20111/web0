<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strona 0 - Bezpieczny dostęp</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Ładowanie...</p>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-box">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h1>Strona 0</h1>
                <p class="subtitle">Bezpieczny dostęp do Twoich danych</p>
                
                <!-- Formularz logowania email/hasło -->
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-envelope input-icon"></i>
                            <input type="email" id="emailInput" class="form-input" placeholder="Adres e-mail" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="passwordLoginInput" class="form-input" placeholder="Hasło" required>
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('passwordLoginInput')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div id="loginError" class="error-message"></div>
                    
                    <button type="submit" class="submit-btn full-width">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Zaloguj się</span>
                    </button>
                </form>
                
                <div class="login-separator">
                    <span>lub</span>
                </div>
                
                <button onclick="showScreen('registerScreen')" class="secondary-btn full-width">
                    <i class="fas fa-user-plus"></i>
                    <span>Utwórz nowe konto</span>
                </button>
                
                <button onclick="showScreen('resetPasswordScreen')" class="text-btn">
                    Zapomniałeś hasła?
                </button>
                
                <div class="login-footer">
                    <p class="security-info">
                        <i class="fas fa-lock"></i>
                        Zabezpieczone połączenie
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Screen -->
    <div id="registerScreen" class="screen">
        <div class="login-container">
            <div class="login-box">
                <div class="back-btn" onclick="showScreen('loginScreen')">
                    <i class="fas fa-arrow-left"></i>
                </div>
                
                <div class="logo">
                    <i class="fas fa-user-plus"></i>
                </div>
                <h1>Utwórz konto</h1>
                <p class="subtitle">Wprowadź dane do rejestracji</p>
                
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-envelope input-icon"></i>
                            <input type="email" id="registerEmailInput" class="form-input" placeholder="Adres e-mail" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="registerPasswordInput" class="form-input" placeholder="Hasło (min. 6 znaków)" required minlength="6">
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('registerPasswordInput')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="registerPasswordConfirmInput" class="form-input" placeholder="Potwierdź hasło" required>
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('registerPasswordConfirmInput')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div id="registerError" class="error-message"></div>
                    
                    <button type="submit" class="submit-btn full-width">
                        <i class="fas fa-user-plus"></i>
                        <span>Zarejestruj się</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Reset Password Screen -->
    <div id="resetPasswordScreen" class="screen">
        <div class="login-container">
            <div class="login-box">
                <div class="back-btn" onclick="showScreen('loginScreen')">
                    <i class="fas fa-arrow-left"></i>
                </div>
                
                <div class="logo">
                    <i class="fas fa-key"></i>
                </div>
                <h1>Resetuj hasło</h1>
                <p class="subtitle">Wyślemy Ci link do resetowania hasła</p>
                
                <form id="resetPasswordForm" onsubmit="handleResetPassword(event)">
                    <div class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-envelope input-icon"></i>
                            <input type="email" id="resetEmailInput" class="form-input" placeholder="Adres e-mail" required>
                        </div>
                    </div>
                    
                    <div id="resetError" class="error-message"></div>
                    <div id="resetSuccess" class="success-message"></div>
                    
                    <button type="submit" class="submit-btn full-width">
                        <i class="fas fa-paper-plane"></i>
                        <span>Wyślij link resetujący</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Password Screen -->
    <div id="passwordScreen" class="screen">
        <div class="auth-container">
            <div class="auth-box">
                <div class="auth-icon">
                    <i class="fas fa-key"></i>
                </div>
                <h2 id="passwordTitle">Utwórz hasło dostępu</h2>
                <p class="auth-subtitle">To hasło będzie wymagane przy każdym logowaniu</p>
                
                <form id="passwordForm" onsubmit="handlePasswordSubmit(event)">
                    <div class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="passwordInput" class="form-input" placeholder="Wprowadź hasło" required>
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('passwordInput')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div id="passwordConfirmGroup" class="form-group">
                        <div class="input-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="passwordConfirmInput" class="form-input" placeholder="Potwierdź hasło" required>
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('passwordConfirmInput')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div id="passwordStrength" class="password-strength">
                        <div class="strength-bar">
                            <div class="strength-fill"></div>
                        </div>
                        <span class="strength-text">Siła hasła: <span id="strengthValue">Słabe</span></span>
                    </div>
                    
                    <div id="passwordError" class="error-message"></div>
                    
                    <button type="submit" class="submit-btn">
                        <span>Dalej</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
                
                <div class="auth-progress">
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- PIN Screen -->
    <div id="pinScreen" class="screen">
        <div class="auth-container">
            <div class="auth-box">
                <div class="auth-icon">
                    <i class="fas fa-hashtag"></i>
                </div>
                <h2 id="pinTitle">Utwórz kod PIN</h2>
                <p class="auth-subtitle">4-cyfrowy kod do szybkiego dostępu</p>
                
                <form id="pinForm" onsubmit="handlePinSubmit(event)">
                    <div class="pin-input-container">
                        <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" required>
                        <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" required>
                        <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" required>
                        <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" required>
                    </div>
                    
                    <div id="pinError" class="error-message"></div>
                    
                    <button type="submit" class="submit-btn">
                        <span>Dalej</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
                
                <div class="auth-progress">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Security Rule Screen -->
    <div id="securityRuleScreen" class="screen">
        <div class="auth-container">
            <div class="auth-box">
                <div class="auth-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h2 id="securityRuleTitle">Utwórz regułę bezpieczeństwa</h2>
                <p class="auth-subtitle">Odpowiedz na pytanie bezpieczeństwa</p>
                
                <form id="securityRuleForm" onsubmit="handleSecurityRuleSubmit(event)">
                    <div class="form-group">
                        <label class="form-label">Wybierz pytanie:</label>
                        <select id="securityQuestion" class="form-select" required>
                            <option value="">-- Wybierz pytanie --</option>
                            <option value="mother">Nazwisko panieńskie matki</option>
                            <option value="pet">Imię pierwszego zwierzęcia</option>
                            <option value="city">Miasto urodzenia</option>
                            <option value="school">Nazwa pierwszej szkoły</option>
                            <option value="friend">Imię najlepszego przyjaciela z dzieciństwa</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Twoja odpowiedź:</label>
                        <input type="text" id="securityAnswer" class="form-input" placeholder="Wprowadź odpowiedź" required>
                    </div>
                    
                    <div id="securityRuleError" class="error-message"></div>
                    
                    <button type="submit" class="submit-btn">
                        <span>Zakończ konfigurację</span>
                        <i class="fas fa-check"></i>
                    </button>
                </form>
                
                <div class="auth-progress">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot active"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="mainApp" class="screen">
        <nav class="nav">
            <div class="nav-header">
                <h1>Strona 0</h1>
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="userEmail"></span>
                    <button onclick="logout()" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" onclick="showSection('home')">
                    <i class="fas fa-home"></i>
                    <span>Strona główna</span>
                </li>
                <li class="nav-item" onclick="showSection('notepad')">
                    <i class="fas fa-sticky-note"></i>
                    <span>Notatnik</span>
                </li>
            </ul>
        </nav>
        
        <main class="content">
            <!-- Home Section -->
            <section id="homeSection" class="section active">
                <div class="section-header">
                    <h2>Witaj w Stronie 0</h2>
                    <p>Twoje bezpieczne miejsce na dane</p>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Bezpieczeństwo</h3>
                        <p>Twoje dane są chronione trzema poziomami zabezpieczeń</p>
                        <ul class="feature-list">
                            <li><i class="fas fa-check"></i> Hasło dostępu</li>
                            <li><i class="fas fa-check"></i> Kod PIN</li>
                            <li><i class="fas fa-check"></i> Reguła bezpieczeństwa</li>
                        </ul>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-sticky-note"></i>
                        </div>
                        <h3>Notatnik</h3>
                        <p>Zapisuj ważne informacje w bezpiecznym miejscu</p>
                        <button class="card-btn" onclick="showSection('notepad')">
                            <i class="fas fa-arrow-right"></i>
                            Przejdź do notatnika
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Notepad Section -->
            <section id="notepadSection" class="section">
                <div class="notepad-container">
                    <div class="notes-sidebar">
                        <div class="sidebar-header">
                            <h3>Notatki</h3>
                            <button class="btn-new-note" onclick="createNewNote()">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        
                        <div class="notes-search">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchNotes" placeholder="Szukaj notatek..." oninput="searchNotes()">
                        </div>
                        
                        <div class="notes-filter">
                            <button class="filter-btn active" onclick="filterNotes('all')">Wszystkie</button>
                            <button class="filter-btn" onclick="filterNotes('starred')">Oznaczone</button>
                            <button class="filter-btn" onclick="filterNotes('recent')">Ostatnie</button>
                        </div>
                        
                        <div id="notesList" class="notes-list">
                            <!-- Notes will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="note-editor">
                        <div id="editorPlaceholder" class="editor-placeholder">
                            <i class="fas fa-sticky-note"></i>
                            <p>Wybierz notatkę lub utwórz nową</p>
                        </div>
                        
                        <div id="editorContainer" class="editor-container" style="display: none;">
                            <div class="editor-header">
                                <input type="text" id="noteTitle" class="note-title-input" placeholder="Tytuł notatki...">
                                <div class="editor-actions">
                                    <button class="editor-btn" onclick="toggleStar()">
                                        <i class="far fa-star" id="starIcon"></i>
                                    </button>
                                    <button class="editor-btn" onclick="deleteNote()">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="editor-toolbar">
                                <button class="toolbar-btn" onclick="formatText('bold')">
                                    <i class="fas fa-bold"></i>
                                </button>
                                <button class="toolbar-btn" onclick="formatText('italic')">
                                    <i class="fas fa-italic"></i>
                                </button>
                                <button class="toolbar-btn" onclick="formatText('underline')">
                                    <i class="fas fa-underline"></i>
                                </button>
                                <div class="toolbar-separator"></div>
                                <button class="toolbar-btn" onclick="formatText('insertUnorderedList')">
                                    <i class="fas fa-list-ul"></i>
                                </button>
                                <button class="toolbar-btn" onclick="formatText('insertOrderedList')">
                                    <i class="fas fa-list-ol"></i>
                                </button>
                                <div class="toolbar-separator"></div>
                                <button class="toolbar-btn" onclick="insertLink()">
                                    <i class="fas fa-link"></i>
                                </button>
                                <input type="color" id="colorPicker" onchange="changeTextColor()" style="display: none;">
                                <button class="toolbar-btn" onclick="document.getElementById('colorPicker').click()">
                                    <i class="fas fa-palette"></i>
                                </button>
                            </div>
                            
                            <div id="noteContent" class="note-content" contenteditable="true" placeholder="Zacznij pisać..."></div>
                            
                            <div class="editor-footer">
                                <span id="noteDate" class="note-date"></span>
                                <span id="saveStatus" class="save-status">
                                    <i class="fas fa-check"></i> Zapisano
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="config.js"></script>
    <script src="script.js"></script>
    <script src="security.js"></script>
</body>
</html>
