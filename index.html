<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Page Not Found</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 404 Error Screen (Fake) -->
    <div id="errorScreen" class="error-screen">
        <div class="error-content">
            <h1>404</h1>
            <h2>Page Not Found</h2>
            <p>The page you are looking for doesn't exist or has been moved.</p>
        </div>
    </div>

    <!-- Real App Container (Hidden by default) -->
    <div id="appContainer" style="display: none;">
        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loader"></div>
        </div>

        <!-- Upload Progress Overlay -->
        <div id="uploadOverlay" class="upload-overlay">
            <div class="upload-progress-container">
                <h3>Przesyłanie pliku</h3>
                <div class="upload-info">
                    <span id="uploadFileName"></span>
                    <span id="uploadStatus">0%</span>
                </div>
                <div class="upload-progress-bar">
                    <div id="uploadProgressFill" class="upload-progress-fill"></div>
                </div>
                <div class="upload-speed">
                    <span id="uploadSpeed">0 MB/s</span>
                    <span id="uploadTimeLeft">Obliczanie...</span>
                </div>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="loginScreen" class="screen active">
            <div class="login-container">
                <div class="login-box">
                    <div class="logo">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h1>Strona 0</h1>
                    <p class="subtitle">Bezpieczny dostęp do Twoich danych</p>
                    
                    <div class="google-btn-wrapper">
                        <div id="googleLoginBtn" class="google-btn-container"></div>
                    </div>
                    
                    <div class="login-footer">
                        <p class="security-info">
                            <i class="fas fa-lock"></i>
                            Zabezpieczone połączenie
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Screen -->
        <div id="passwordScreen" class="screen">
            <div class="password-container">
                <div class="password-box">
                    <div class="back-btn" onclick="location.reload()">
                        <i class="fas fa-arrow-left"></i>
                    </div>
                    
                    <div class="user-info">
                        <img id="userAvatar" src="" alt="Avatar" class="user-avatar">
                        <h2 id="userName"></h2>
                    </div>
                    
                    <h3 id="passwordTitle">Wprowadź hasło</h3>
                    
                    <form id="passwordForm">
                        <div class="form-group">
                            <div class="input-wrapper">
                                <i class="fas fa-lock input-icon"></i>
                                <input type="password" id="passwordInput" class="form-input" 
                                       placeholder="Hasło" required>
                                <button type="button" class="toggle-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div id="passwordConfirmGroup" class="form-group" style="display: none;">
                            <div class="input-wrapper">
                                <i class="fas fa-lock input-icon"></i>
                                <input type="password" id="passwordConfirm" class="form-input" 
                                       placeholder="Potwierdź hasło">
                                <button type="button" class="toggle-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div id="passwordStrength" class="password-strength" style="display: none;">
                            <div class="strength-bar">
                                <div class="strength-fill"></div>
                            </div>
                            <span class="strength-text">Siła hasła</span>
                        </div>
                        
                        <div id="passwordError" class="error-message"></div>
                        
                        <button type="submit" class="submit-btn">
                            <span>Kontynuuj</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </form>
                    
                    <div id="lockoutMessage" class="lockout-message" style="display: none;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Konto tymczasowo zablokowane</h3>
                        <p>Ze względów bezpieczeństwa konto zostało zablokowane na 5 godzin.</p>
                        <div class="lockout-timer">
                            <span>Pozostało:</span>
                            <span id="lockoutTime" class="time">00:00:00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PIN Screen -->
        <div id="pinScreen" class="screen">
            <div class="pin-container">
                <div class="pin-box">
                    <div class="back-btn" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i>
                    </div>
                    
                    <div class="pin-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    
                    <h3 id="pinTitle">Wprowadź PIN</h3>
                    <p class="pin-subtitle">4-cyfrowy kod zabezpieczający</p>
                    
                    <form id="pinForm">
                        <div class="pin-inputs">
                            <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" inputmode="numeric">
                            <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" inputmode="numeric">
                            <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" inputmode="numeric">
                            <input type="text" class="pin-digit" maxlength="1" pattern="[0-9]" inputmode="numeric">
                        </div>
                        
                        <div id="pinConfirmContainer" style="display: none;">
                            <p class="pin-subtitle mt-3">Potwierdź PIN</p>
                            <div class="pin-inputs">
                                <input type="text" class="pin-digit-confirm" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="pin-digit-confirm" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="pin-digit-confirm" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="pin-digit-confirm" maxlength="1" pattern="[0-9]" inputmode="numeric">
                            </div>
                        </div>
                        
                        <div id="pinError" class="error-message"></div>
                        
                        <button type="submit" class="submit-btn">
                            <span>Kontynuuj</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Rule Screen -->
        <div id="ruleScreen" class="screen">
            <div class="rule-container">
                <div class="rule-box">
                    <div class="back-btn" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i>
                    </div>
                    
                    <div class="rule-icon">
                        <i class="fas fa-fingerprint"></i>
                    </div>
                    
                    <h3 id="ruleTitle">Wprowadź regułę bezpieczeństwa</h3>
                    <p class="rule-subtitle">2-znakowy kod: cyfra + litera</p>
                    
                    <form id="ruleForm">
                        <div class="rule-inputs">
                            <input type="text" id="ruleDigit" class="rule-input" maxlength="1" 
                                   pattern="[0-9]" inputmode="numeric" placeholder="0">
                            <span class="rule-separator">+</span>
                            <input type="text" id="ruleLetter" class="rule-input" maxlength="1" 
                                   pattern="[A-Za-z]" placeholder="A">
                        </div>
                        
                        <div id="ruleConfirmContainer" style="display: none;">
                            <p class="rule-subtitle mt-3">Potwierdź regułę</p>
                            <div class="rule-inputs">
                                <input type="text" id="ruleDigitConfirm" class="rule-input" maxlength="1" 
                                       pattern="[0-9]" inputmode="numeric" placeholder="0">
                                <span class="rule-separator">+</span>
                                <input type="text" id="ruleLetterConfirm" class="rule-input" maxlength="1" 
                                       pattern="[A-Za-z]" placeholder="A">
                            </div>
                        </div>
                        
                        <div id="ruleError" class="error-message"></div>
                        
                        <button type="submit" class="submit-btn">
                            <span>Zakończ konfigurację</span>
                            <i class="fas fa-check"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Main Panel -->
        <div id="mainPanel" class="screen">
            <div class="main-container">
                <!-- Sidebar -->
                <aside class="sidebar">
                    <div class="sidebar-header">
                        <div class="app-title">
                            <i class="fas fa-shield-alt"></i>
                            <span>Strona 0</span>
                        </div>
                    </div>
                    
                    <nav class="sidebar-nav">
                        <a href="#" class="nav-item active" data-section="home">
                            <i class="fas fa-home"></i>
                            <span>Strona główna</span>
                        </a>
                        <a href="#" class="nav-item" data-section="notepad">
                            <i class="fas fa-sticky-note"></i>
                            <span>Notatnik</span>
                            <span class="badge">Bezpieczny</span>
                        </a>
                        <a href="#" class="nav-item" data-section="videos">
                            <i class="fas fa-film"></i>
                            <span>Filmy i katalogi</span>
                            <span class="badge">Nowe</span>
                        </a>
                    </nav>
                    
                    <div class="sidebar-footer">
                        <div class="user-menu">
                            <img id="sidebarAvatar" src="" alt="Avatar" class="user-avatar-small">
                            <span id="sidebarUserName"></span>
                        </div>
                        <button id="logoutBtn" class="logout-btn">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </aside>
                
                <!-- Content -->
                <main class="content">
                    <!-- Back Navigation -->
                    <div class="content-nav" id="contentNav" style="display: none;">
                        <button class="back-nav-btn" onclick="backToHome()">
                            <i class="fas fa-arrow-left"></i>
                            <span>Powrót</span>
                        </button>
                    </div>
                    
                    <!-- Home Content -->
                    <div id="homeContent">
                        <div class="content-header">
                            <h1>Witaj ponownie!</h1>
                            <p>Twoje dane są bezpieczne</p>
                        </div>
                        
                        <div class="welcome-content">
                            <div class="info-card">
                                <i class="fas fa-shield-alt"></i>
                                <h3>Potrójne zabezpieczenie</h3>
                                <p>Hasło + PIN + Reguła</p>
                            </div>
                            <div class="info-card">
                                <i class="fas fa-lock"></i>
                                <h3>Szyfrowanie</h3>
                                <p>Dane zaszyfrowane end-to-end</p>
                            </div>
                            <div class="info-card">
                                <i class="fas fa-user-shield"></i>
                                <h3>Prywatność</h3>
                                <p>Tylko Ty masz dostęp</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notepad Section -->
                    <div id="notepadSection" style="display: none;">
                        <div class="notepad-container">
                            <div class="notes-sidebar">
                                <div class="notes-header">
                                    <h3>Notatki</h3>
                                    <button class="new-note-btn" onclick="createNewNote()">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                
                                <div class="search-box">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="searchInput" placeholder="Szukaj notatek...">
                                </div>
                                
                                <div class="filter-buttons">
                                    <button class="filter-btn active" data-filter="all">Wszystkie</button>
                                    <button class="filter-btn" data-filter="starred">Oznaczone</button>
                                    <button class="filter-btn" data-filter="recent">Ostatnie</button>
                                </div>
                                
                                <div id="notesList" class="notes-list"></div>
                            </div>
                            
                            <div class="note-editor">
                                <div class="editor-header">
                                    <input type="text" id="noteTitle" class="note-title-input" placeholder="Tytuł notatki">
                                    <div class="editor-actions">
                                        <button class="editor-btn star-btn" onclick="toggleStar()">
                                            <i class="far fa-star"></i>
                                        </button>
                                        <button class="editor-btn save-btn" onclick="saveNote()">
                                            <i class="fas fa-save"></i>
                                        </button>
                                        <button class="editor-btn" onclick="deleteNote()">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="editor-toolbar">
                                    <button class="toolbar-btn" onclick="formatText('bold')">
                                        <i class="fas fa-bold"></i>
                                    </button>
                                    <button class="toolbar-btn" onclick="formatText('italic')">
                                        <i class="fas fa-italic"></i>
                                    </button>
                                    <button class="toolbar-btn" onclick="formatText('underline')">
                                        <i class="fas fa-underline"></i>
                                    </button>
                                    <div class="toolbar-separator"></div>
                                    <button class="toolbar-btn" onclick="insertList('ul')">
                                        <i class="fas fa-list-ul"></i>
                                    </button>
                                    <button class="toolbar-btn" onclick="insertList('ol')">
                                        <i class="fas fa-list-ol"></i>
                                    </button>
                                    <div class="toolbar-separator"></div>
                                    <button class="toolbar-btn" onclick="changeColor()">
                                        <i class="fas fa-palette"></i>
                                    </button>
                                    <button class="toolbar-btn" onclick="insertLink()">
                                        <i class="fas fa-link"></i>
                                    </button>
                                </div>
                                
                                <div id="noteContent" class="note-content" contenteditable="true"></div>
                                
                                <div class="editor-footer">
                                    <span id="charCount">0 znaków</span>
                                    <span id="lastSaved"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Videos Section -->
                    <div id="videosSection" style="display: none;">
                        <div class="videos-container">
                            <!-- Folder Browser -->
                            <div class="folder-browser">
                                <div class="browser-header">
                                    <h3>Katalogi</h3>
                                    <div class="browser-actions">
                                        <button class="action-btn" onclick="createNewFolder()">
                                            <i class="fas fa-folder-plus"></i>
                                        </button>
                                        <button class="action-btn" onclick="showUploadModal()">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="browser-path">
                                    <i class="fas fa-home"></i>
                                    <span id="currentPath">/ Główny</span>
                                </div>
                                
                                <div id="foldersList" class="folders-list"></div>
                            </div>
                            
                            <!-- Video Grid -->
                            <div class="video-content">
                                <div class="content-header">
                                    <h2 id="folderTitle">Wszystkie filmy</h2>
                                    <div class="view-controls">
                                        <button class="view-btn active" data-view="grid">
                                            <i class="fas fa-th"></i>
                                        </button>
                                        <button class="view-btn" data-view="list">
                                            <i class="fas fa-list"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="videosGrid" class="videos-grid"></div>
                                
                                <!-- Empty State -->
                                <div id="emptyState" class="empty-state" style="display: none;">
                                    <i class="fas fa-film"></i>
                                    <h3>Brak filmów</h3>
                                    <p>Wgraj pierwszy film do tego katalogu</p>
                                    <button class="upload-btn" onclick="showUploadModal()">
                                        <i class="fas fa-upload"></i>
                                        <span>Wgraj film</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Access Modal -->
        <div id="pinModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Dostęp do sekcji</h3>
                    <button class="modal-close" onclick="closePinModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="accessForm">
                    <div class="access-info">
                        <i class="fas fa-info-circle"></i>
                        <p>Wprowadź kod dostępu: @[PIN][REGUŁA]</p>
                        <small>Przykład: @1234A5</small>
                    </div>
                    
                    <div class="form-group">
                        <input type="text" id="accessCode" class="form-input" 
                               placeholder="@____" maxlength="7" required>
                    </div>
                    
                    <div id="accessError" class="error-message"></div>
                    
                    <button type="submit" class="submit-btn">
                        <span>Uzyskaj dostęp</span>
                        <i class="fas fa-unlock"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Video Upload Modal -->
        <div id="uploadModal" class="modal">
            <div class="modal-content upload-modal">
                <div class="modal-header">
                    <h3>Wgraj film</h3>
                    <button class="modal-close" onclick="closeUploadModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="upload-area">
                    <input type="file" id="videoFileInput" accept="video/*" multiple style="display: none;">
                    
                    <div class="upload-dropzone" id="uploadDropzone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Przeciągnij i upuść pliki tutaj</h3>
                        <p>lub</p>
                        <button class="browse-btn" onclick="document.getElementById('videoFileInput').click()">
                            Wybierz pliki
                        </button>
                        <small>Obsługiwane formaty: MP4, WebM, MOV, AVI (maks. 5GB)</small>
                    </div>
                    
                    <div id="uploadQueue" class="upload-queue" style="display: none;">
                        <h4>Kolejka przesyłania</h4>
                        <div id="uploadQueueList"></div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="cancel-btn" onclick="closeUploadModal()">Anuluj</button>
                    <button id="startUploadBtn" class="submit-btn" onclick="startUpload()" disabled>
                        <i class="fas fa-upload"></i>
                        <span>Rozpocznij przesyłanie</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Video Player Modal -->
        <div id="videoPlayerModal" class="modal video-player-modal">
            <div class="player-container">
                <div class="player-header">
                    <h3 id="videoPlayerTitle"></h3>
                    <button class="modal-close" onclick="closeVideoPlayer()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="video-wrapper">
                    <video id="videoPlayer" controls controlsList="nodownload">
                        Your browser does not support the video tag.
                    </video>
                </div>
                
                <div class="player-info">
                    <div class="video-details">
                        <span id="videoSize"></span>
                        <span>•</span>
                        <span id="videoDuration"></span>
                        <span>•</span>
                        <span id="videoDate"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- New Folder Modal -->
        <div id="newFolderModal" class="modal">
            <div class="modal-content small-modal">
                <div class="modal-header">
                    <h3>Nowy folder</h3>
                    <button class="modal-close" onclick="closeNewFolderModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="newFolderForm">
                    <div class="form-group">
                        <label>Nazwa folderu</label>
                        <input type="text" id="folderNameInput" class="form-input" 
                               placeholder="Moje filmy" required maxlength="50">
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="cancel-btn" onclick="closeNewFolderModal()">Anuluj</button>
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-folder-plus"></i>
                            <span>Utwórz</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <!-- Entry handler script - loaded first before any blockers -->
    <script>
        // Secret entry handler - must be loaded BEFORE devtools blocker
        window.secretEntryHandler = function(e) {
            if (e.ctrlKey && e.shiftKey && (e.key === 'Z' || e.key === 'z')) {
                e.preventDefault();
                e.stopPropagation();
                
                document.getElementById('errorScreen').style.display = 'none';
                document.getElementById('appContainer').style.display = 'block';
                
                console.log('Strona 0 - Activated!');
                
                // Initialize app after revealing
                if (typeof initializeApp === 'function') {
                    initializeApp();
                }
            }
        };
        
        // Attach listener with highest priority
        document.addEventListener('keydown', window.secretEntryHandler, true);
        
        // Alternative entry - triple click
        let clickCount = 0;
        let clickTimer;
        document.addEventListener('click', function(e) {
            if (e.target.closest('.error-content')) {
                clickCount++;
                clearTimeout(clickTimer);
                clickTimer = setTimeout(() => { clickCount = 0; }, 500);
                
                if (clickCount === 3) {
                    document.getElementById('errorScreen').style.display = 'none';
                    document.getElementById('appContainer').style.display = 'block';
                    
                    if (typeof initializeApp === 'function') {
                        initializeApp();
                    }
                    clickCount = 0;
                }
            }
        });
    </script>
    
    <!-- DevTools Blocker -->
    <script src="devtools-blocker.js"></script>
    
    <!-- Main Application -->
    <script src="script.js"></script>
</body>
</html>
